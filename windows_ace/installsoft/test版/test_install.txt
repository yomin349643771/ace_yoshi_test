@echo off
@以下のコマンドをオフにする



＊＊＊batファイルに書き込むためのメモです

各batファイルに書き込んで各々のbatファイルを1つ終わってから次のbatファイル実行がよいかも?

実行するファイルの処理が終わってから次に移動する(基本的にこっち使う)
call 実行したいexeファイル、batファイル

実行ファイルの処理の終了を待たずにバッチファイルの処理を先に進ませる
start 実行したいexeファイル、batファイル




windows版のみ対応
①nodeインストール(インストールしているデータは置いている)
今回はnodeは公式からダウンロードした安定版の10.16.0を使用した(バージョンの指定はなし)

msiexec /i node-v10.16.0-x64.msi

(なお管理者として実行を右クリックして選択する必要がある)

②windows-build-toolsのインストール

③各必要なモジュールのインストール
(ほとんどコピペで大丈夫だが一部、必要だろう)
npm install jquery-confirm
npm install node-pty

④nginxのインストール
/usr/local/nginxにある？？
windows版v1.16.0をインストールします(もうインストールしたzipファイルをいれている)

zipファイル解凍
unzip nginx-1.16.0.zip

nginxのディレクトリ名変更
ren nginx-1.16.0 nginx

nginxディレクトリに移動
cd nginx

nginxの起動
start nginx

以下にnginxのファイルを作って起動させたいので、一旦停止させる
nginx -s stop

⑤nginxのプログラムを書き加える
nginxのconfディレクトリに移動させておく
cd nginxがあるところ

confファイル生成
copy nul default.conf

ファイルにnginxプログラムを書き込む
echo 書き込むプログラム > default.conf

以下書き込むプログラム
server {

    listen 80;
    server_name  localhost;

    location / {
	root /home/yoshiga/web_basic/yoshiga; //ここはrootがちゃんと通せるようにうまく変更しておく(例)root C:\\Users\\elelqstux;
        index  index3.html demo_basic.html;
    }
    location /socket.io/ {
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_http_version 1.1;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_pass http://localhost:8080;
    }
}
ここまで

⑥nginx再起動(管理者権限)
start nginx

⑥node起動
node起動までにnodeはインストール出来ているので
nodeのプログラムでバッチファイルを動かす

node_bat.txtに書いているのでそれをバッチファイルにすればよい
(インストールした段階ではもうバッチになっているので気にしなくて良い)
